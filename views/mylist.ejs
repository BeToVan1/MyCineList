<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MyCineList</title>
  <link rel="stylesheet" href="../styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hoomanbahreini/bootstrap-half-and-quarter-grid/fractional-grid.css">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
</head>

<body class = "text-bg-dark">
  <!-- header -->
  <header class="p-3 text-bg-dark">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
            <use xlink:href="#bootstrap"></use>
          </svg>
        </a>

        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          <li><a href="/loggedin" class="nav-link px-2 text-light" style="font-size: 1.25rem;">MyCineList</a></li>
          
        </ul>

        <form id="movie-search-form" class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
          <input id="search-input" type="search" class="form-control form-control-dark text-bg-dark"
            placeholder="Search..." aria-label="Search">
        </form>

        <div class="text-end">
          <a class="btn btn-dark btn-lg" href="/MyList" role ="button">My List</a>
          <a class="btn btn-dark btn-lg" href="/logout" role ="button">Logout</a>
        </div>
      </div>
    </div>
    <hr >
  </header>
  <!-- header -->

  <!-- hero -->
  <div id="hero" class="px-4 py-5 my-2 text-center">
    <!--<img class="d-block mx-auto mb-4" src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57"> -->
    <h1 class="display-5 fw-bold text-light text-bg-secondary" style="max-width: 1046.64px; margin:0 auto;">My List</h1>
    <div class="col-lg-6 mx-auto ">
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
      </div>
    </div>
  </div>
  <!-- hero -->

   <!-- search results-->
   <div id="search-results-section" class="row text-bg-dark mx-5">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    </div>

    <div class="well search-result text-bg-dark my-3">
      <div class="row">
          <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img class="img-responsive"
              src="https://www.bootdey.com/image/600x900/7B68EE/000000" alt=""></a></div>
          <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
            <h3>Result name one</h3>
            <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
              ligula at massa sodales, ullamcorper rutrum orci semper.</p>
              <input type = "hidden" id = movie_id value="">
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Add to list
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 - Horrendous</a>
                  <a class="dropdown-item" href="#">2 - Horrible</a>
                  <a class="dropdown-item" href="#">3 - Awful</a>
                  <a class="dropdown-item" href="#">4 - Very Bad</a>
                  <a class="dropdown-item" href="#">5 - Bad</a>
                  <a class="dropdown-item" href="#">6 - Fine</a>
                  <a class="dropdown-item" href="#">7 - Mediocre</a>
                  <a class="dropdown-item" href="#">8 - Great</a>
                  <a class="dropdown-item" href="#">9 - Amazing</a>
                  <a class="dropdown-item" href="#">10 - Masterpiece</a>
                </div>
              </div>
          </div>
        </div>
    </div>
    <hr class="hrsearch">
    <div class="well search-result text-bg-dark my-3">
      <div class="row">
          <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"> <a href="/moviepage"><img class="img-responsive"
              src="https://www.bootdey.com/image/600x900/7B68EE/000000" alt=""></a></div>
          <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
            <h3>Result name one</h3>
            <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
              ligula at massa sodales, ullamcorper rutrum orci semper.</p>
              <input type = "hidden" id = movie_id value="">
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Add to list
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 - Horrendous</a>
                  <a class="dropdown-item" href="#">2 - Horrible</a>
                  <a class="dropdown-item" href="#">3 - Awful</a>
                  <a class="dropdown-item" href="#">4 - Very Bad</a>
                  <a class="dropdown-item" href="#">5 - Bad</a>
                  <a class="dropdown-item" href="#">6 - Fine</a>
                  <a class="dropdown-item" href="#">7 - Mediocre</a>
                  <a class="dropdown-item" href="#">8 - Great</a>
                  <a class="dropdown-item" href="#">9 - Amazing</a>
                  <a class="dropdown-item" href="#">10 - Masterpiece</a>
                </div>
              </div>
          </div>
        </div>
    </div>
    <hr class="hrsearch">
    <div class="well search-result text-bg-dark my-3">
      <div class="row">
          <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img class="img-responsive"
              src="https://www.bootdey.com/image/600x900/7B68EE/000000" alt=""></a></div>
          <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
            <h3>Result name one</h3>
            <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
              ligula at massa sodales, ullamcorper rutrum orci semper.</p>
              <input type = "hidden" id = movie_id value="">
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Add to list
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 - Horrendous</a>
                  <a class="dropdown-item" href="#">2 - Horrible</a>
                  <a class="dropdown-item" href="#">3 - Awful</a>
                  <a class="dropdown-item" href="#">4 - Very Bad</a>
                  <a class="dropdown-item" href="#">5 - Bad</a>
                  <a class="dropdown-item" href="#">6 - Fine</a>
                  <a class="dropdown-item" href="#">7 - Mediocre</a>
                  <a class="dropdown-item" href="#">8 - Great</a>
                  <a class="dropdown-item" href="#">9 - Amazing</a>
                  <a class="dropdown-item" href="#">10 - Masterpiece</a>
                </div>
              </div>
          </div>
        </div>
    </div>
    <hr class="hrsearch">
    <div class="well search-result text-bg-dark my-3">
      <div class="row">
          <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"> <a href="/moviepage"><img class="img-responsive"
              src="https://www.bootdey.com/image/600x900/7B68EE/000000" alt=""></a></div>
          <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
            <h3>Result name one</h3>
            <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
              ligula at massa sodales, ullamcorper rutrum orci semper.</p>
              <input type = "hidden" id = movie_id value="">
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Add to list
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 - Horrendous</a>
                  <a class="dropdown-item" href="#">2 - Horrible</a>
                  <a class="dropdown-item" href="#">3 - Awful</a>
                  <a class="dropdown-item" href="#">4 - Very Bad</a>
                  <a class="dropdown-item" href="#">5 - Bad</a>
                  <a class="dropdown-item" href="#">6 - Fine</a>
                  <a class="dropdown-item" href="#">7 - Mediocre</a>
                  <a class="dropdown-item" href="#">8 - Great</a>
                  <a class="dropdown-item" href="#">9 - Amazing</a>
                  <a class="dropdown-item" href="#">10 - Masterpiece</a>
                </div>
              </div>
          </div>
        </div>
    </div>
    <hr class="hrsearch">
    <div class="well search-result text-bg-dark my-3">
      <div class="row">
          <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img class="img-responsive"
              src="https://www.bootdey.com/image/600x900/7B68EE/000000" alt=""></a>
            </div>
          <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
            <h3>Result name one</h3>
            <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
              ligula at massa sodales, ullamcorper rutrum orci semper.</p>
              <input type = "hidden" id = movie_id value="">
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Add to list
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 - Horrendous</a>
                  <a class="dropdown-item" href="#">2 - Horrible</a>
                  <a class="dropdown-item" href="#">3 - Awful</a>
                  <a class="dropdown-item" href="#">4 - Very Bad</a>
                  <a class="dropdown-item" href="#">5 - Bad</a>
                  <a class="dropdown-item" href="#">6 - Fine</a>
                  <a class="dropdown-item" href="#">7 - Mediocre</a>
                  <a class="dropdown-item" href="#">8 - Great</a>
                  <a class="dropdown-item" href="#">9 - Amazing</a>
                  <a class="dropdown-item" href="#">10 - Masterpiece</a>
                </div>
              </div>
          </div>
        </div>
    </div>
    <hr class="hrsearch">
  </div>
  <!-- search results-->

  <!-- user list-->
  <table class="table table-dark userlist">
    <thead>
      <tr>
        <th width="10%" scope="col-sm"></th>
        <th width="5%"  scope="col">#</th>
        <th width="20%" scope="col">Image</th>
        <th width="50%" scope="col">Title</th>
        <th width="15%" scope="col">Score</th>
      </tr>
    </thead>
    <tbody>
        <% let rowNum = 1; %>
        <% movieData.forEach(function(movie) { %>
          <tr>
            <th scope="row" class="list-text">
              <form action="/remove" method="POST">
                <input type="hidden" id="movie_id" name="movieId" value="<%= movie.movieId %>">
                <button type="submit">Remove</button>
              </form>
            </th>
            <th scope="row" class="list-text"><%= rowNum %></th>
            <th scope="row"><a href="/moviepage" class="img-responsive" data-movieid="<%= movie.movieId %>"><img src=<%= movie.imgURL %> "width = 200px height = 100px"></a></th>
            <th scope="row" class="list-text"><%= movie.title %></th>
            <th scope="row" class="list-text">
              <input type = "hidden" id = movie_id value="<%= movie.movieId %>">
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">  
                  <%= movie.score %>
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 - Horrendous</a>
                  <a class="dropdown-item" href="#">2 - Horrible</a>
                  <a class="dropdown-item" href="#">3 - Awful</a>
                  <a class="dropdown-item" href="#">4 - Very Bad</a>
                  <a class="dropdown-item" href="#">5 - Bad</a>
                  <a class="dropdown-item" href="#">6 - Fine</a>
                  <a class="dropdown-item" href="#">7 - Mediocre</a>
                  <a class="dropdown-item" href="#">8 - Great</a>
                  <a class="dropdown-item" href="#">9 - Amazing</a>
                  <a class="dropdown-item" href="#">10 - Masterpiece</a>
                </div>
            </div></th>
          </tr>
          <% rowNum++; %>
        <% }); %>
    </tbody>
  </table>
  <!-- user list-->


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script src="../movies.js"></script>
  <script>
    $(document).ready(function(){
      $("#search-results-section").on("click", ".img-responsive", function (event) {
      var movieId = $(this).closest(".search-result").find("#movie_id").val();
      event.preventDefault();
      
      const url = `/moviepage?movie_id=${movieId}&source=loggedin`;

      window.location.href = url;
    });
    });
  </script>
</body>

</html>