<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCineList</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/hoomanbahreini/bootstrap-half-and-quarter-grid/fractional-grid.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
        integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
        crossorigin="anonymous"></script>

</head>

<body class="text-bg-dark moviepage">
    <!-- header -->
    <header class="p-3 text-bg-dark">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                    <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                        <use xlink:href="#bootstrap"></use>
                    </svg>
                </a>
    
                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="/" class="nav-link px-2 text-light" style="font-size: 1.25rem;">MyCineList</a></li>
    
                </ul>
    
                <form id="movie-search-form" class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                    <input id="search-input" type="search" class="form-control form-control-dark text-bg-dark"
                        placeholder="Search..." aria-label="Search">
                </form>
    
                <div class="text-end">
                    <div id="loggedout">
                        <a class="btn btn-dark btn-lg" href="/login" role="button">Login</a>
                        <a class="btn btn-dark btn-lg" href="/register" role="button">Sign-up</a>
                    </div>
                    <div id="logged">
                        <a class="btn btn-dark btn-lg" href="/mylist" role="button">My List</a>
                        <a class="btn btn-dark btn-lg" href="/logout" role="button">Logout</a>
                    </div>
                </div>
            </div>
        </div>
        <hr>
    </header>
    <!-- header -->

    <!-- search results-->
    <div id="search-results-section" class="row text-bg-dark mx-5">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        </div>
    
        <div class="well search-result text-bg-dark my-3">
          <div class="row">
              <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img style="max-width: 100%; height: auto;" class="img-responsive"
                  src="" alt=""></a></div>
              <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
                <h3>Result name one</h3>
                <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
                  ligula at massa sodales, ullamcorper rutrum orci semper.</p>
                  <input type = "hidden" id = movie_id value="">
                  <div class="dropdown" id="Dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Add to list
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">1 - Horrendous</a>
                      <a class="dropdown-item" href="#">2 - Horrible</a>
                      <a class="dropdown-item" href="#">3 - Awful</a>
                      <a class="dropdown-item" href="#">4 - Very Bad</a>
                      <a class="dropdown-item" href="#">5 - Bad</a>
                      <a class="dropdown-item" href="#">6 - Fine</a>
                      <a class="dropdown-item" href="#">7 - Mediocre</a>
                      <a class="dropdown-item" href="#">8 - Great</a>
                      <a class="dropdown-item" href="#">9 - Amazing</a>
                      <a class="dropdown-item" href="#">10 - Masterpiece</a>
                    </div>
                  </div>
              </div>
            </div>
        </div>   
        <hr class="hrsearch">
        <div class="well search-result text-bg-dark my-3">
          <div class="row">
              <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img style="max-width: 100%; height: auto;" class="img-responsive"
                  src="" alt=""></a></div>
              <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
                <h3>Result name one</h3>
                <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
                  ligula at massa sodales, ullamcorper rutrum orci semper.</p>
                  <input type = "hidden" id = movie_id value="">
                  <div class="dropdown" id="Dropdown"> 
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Add to list
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">1 - Horrendous</a>
                      <a class="dropdown-item" href="#">2 - Horrible</a>
                      <a class="dropdown-item" href="#">3 - Awful</a>
                      <a class="dropdown-item" href="#">4 - Very Bad</a>
                      <a class="dropdown-item" href="#">5 - Bad</a>
                      <a class="dropdown-item" href="#">6 - Fine</a>
                      <a class="dropdown-item" href="#">7 - Mediocre</a>
                      <a class="dropdown-item" href="#">8 - Great</a>
                      <a class="dropdown-item" href="#">9 - Amazing</a>
                      <a class="dropdown-item" href="#">10 - Masterpiece</a>
                    </div>
                  </div>
              </div>
            </div>
        </div>   
        <hr class="hrsearch">
        <div class="well search-result text-bg-dark my-3">
          <div class="row">
              <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img style="max-width: 100%; height: auto;" class="img-responsive"
                  src="" alt=""></a></div>
              <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
                <h3>Result name one</h3>
                <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
                  ligula at massa sodales, ullamcorper rutrum orci semper.</p>
                  <input type = "hidden" id = movie_id value="">
                  <div class="dropdown" id="Dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Add to list
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">1 - Horrendous</a>
                      <a class="dropdown-item" href="#">2 - Horrible</a>
                      <a class="dropdown-item" href="#">3 - Awful</a>
                      <a class="dropdown-item" href="#">4 - Very Bad</a>
                      <a class="dropdown-item" href="#">5 - Bad</a>
                      <a class="dropdown-item" href="#">6 - Fine</a>
                      <a class="dropdown-item" href="#">7 - Mediocre</a>
                      <a class="dropdown-item" href="#">8 - Great</a>
                      <a class="dropdown-item" href="#">9 - Amazing</a>
                      <a class="dropdown-item" href="#">10 - Masterpiece</a>
                    </div>
                  </div>
              </div>
            </div>
        </div>   
        <hr class="hrsearch">
        <div class="well search-result text-bg-dark my-3">
          <div class="row">
              <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"> <a href="/moviepage"><img style="max-width: 100%; height: auto;" class="img-responsive"
                  src="" alt=""></a></div>
              <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
                <h3>Result name one</h3>
                <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
                  ligula at massa sodales, ullamcorper rutrum orci semper.</p>
                  <input type = "hidden" id = movie_id value="">
                  <div class="dropdown" id="Dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Add to list
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">1 - Horrendous</a>
                      <a class="dropdown-item" href="#">2 - Horrible</a>
                      <a class="dropdown-item" href="#">3 - Awful</a>
                      <a class="dropdown-item" href="#">4 - Very Bad</a>
                      <a class="dropdown-item" href="#">5 - Bad</a>
                      <a class="dropdown-item" href="#">6 - Fine</a>
                      <a class="dropdown-item" href="#">7 - Mediocre</a>
                      <a class="dropdown-item" href="#">8 - Great</a>
                      <a class="dropdown-item" href="#">9 - Amazing</a>
                      <a class="dropdown-item" href="#">10 - Masterpiece</a>
                    </div>
                  </div>
              </div>
            </div>
        </div>   
        <hr class="hrsearch">
        <div class="well search-result text-bg-dark my-3">
          <div class="row">
              <div class="col-xs-6 col-sm-3 col-md-3 col-lg-1-half"><a href="/moviepage"> <img style="max-width: 100%; height: auto;" class="img-responsive"
                  src="" alt=""></a></div>
              <div class="col-xs-6 col-sm-9 col-md-9 col-lg-10-half title">
                <h3>Result name one</h3>
                <p>Ut quis libero id orci semper porta ac vel ante. In nec laoreet sapien. Nunc hendrerit
                  ligula at massa sodales, ullamcorper rutrum orci semper.</p>
                  <input type = "hidden" id = movie_id value="">
                  <div class="dropdown" id="Dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Add to list
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">1 - Horrendous</a>
                      <a class="dropdown-item" href="#">2 - Horrible</a>
                      <a class="dropdown-item" href="#">3 - Awful</a>
                      <a class="dropdown-item" href="#">4 - Very Bad</a>
                      <a class="dropdown-item" href="#">5 - Bad</a>
                      <a class="dropdown-item" href="#">6 - Fine</a>
                      <a class="dropdown-item" href="#">7 - Mediocre</a>
                      <a class="dropdown-item" href="#">8 - Great</a>
                      <a class="dropdown-item" href="#">9 - Amazing</a>
                      <a class="dropdown-item" href="#">10 - Masterpiece</a>
                    </div>
                  </div>
              </div>
            </div>
        </div>   
        <hr class="hrsearch">
      </div>
    <!-- search results-->

    <!-- moviepage -->
    <div class="movieinfo">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h3>
                        <%= movieInfo.title %>
                    </h3>
                </div>
            </div>
            <div class="row">
                <h4>&starf; <%= Math.round(movieInfo.score * 10) / 10 %>
                </h4>
                <hr>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <img src="https://www.themoviedb.org/t/p/w600_and_h900_bestv2/<%= movieInfo.poster_path%>" width=300
                        height="480">
                </div>
                <div class="col-lg-8">
                    <iframe width="854" height="480" src="https://www.youtube.com/embed/<%= trailer %>" frameborder="0"
                        allowfullscreen></iframe>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-lg-4">
                    <% var genreString=movieInfo.genres.map(function(genre) { return genre.name; }).join(', '); %>
                    <p>Genres: <%= genreString %></p>
                    <input type="hidden" id=movie_id value="<%= movieInfo.id %>">
                    <div class="dropdown">
                      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Add to list
                      </button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">1 - Horrendous</a>
                        <a class="dropdown-item" href="#">2 - Horrible</a>
                        <a class="dropdown-item" href="#">3 - Awful</a>
                        <a class="dropdown-item" href="#">4 - Very Bad</a>
                        <a class="dropdown-item" href="#">5 - Bad</a>
                        <a class="dropdown-item" href="#">6 - Fine</a>
                        <a class="dropdown-item" href="#">7 - Mediocre</a>
                        <a class="dropdown-item" href="#">8 - Great</a>
                        <a class="dropdown-item" href="#">9 - Amazing</a>
                        <a class="dropdown-item" href="#">10 - Masterpiece</a>
                      </div>
                    </div>
                </div>
                <div class="col-lg-8">
                    <p><%= movieInfo.overview %></p>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-lg-12">
                    <h4>Cast</h4>
                    <div class="cast-members">
                        <% cast.forEach(function(member){ %>
                            <div class="cast-member">
                                <img src="https://www.themoviedb.org/t/p/w600_and_h900_bestv2/<%=member.profile_path%>" width="138">
                                <div class="cast-info">
                                    <h5><%=member.name %></h5>
                                    <p><%=member.character %></p>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- moviepage-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="../movies.js"></script>
    <script>
        $(document).ready(function(){
          const urlParams = new URLSearchParams(window.location.search);
          const source = urlParams.get("source");
          console.log(source);
          if (source === "loggedout"){
            document.getElementById("logged").style.display = "none";
            document.getElementById("loggedout").style.display = "block";
            var elements = document.getElementsByClassName("dropdown");
            for(var i = 0; i < elements.length; i++){
                elements[i].style.display = "none";
            }
          }
          else if(source === "loggedin"){
            document.getElementById("logged").style.display = "block";
            document.getElementById("loggedout").style.display = "none";
            document.getElementById("Dropdown").style.display = "block";
            var elements = document.getElementsByClassName("dropdown");
            for(var i = 0; i < elements.length; i++){
                elements[i].style.display = "block";
            }
          }
        });
      </script>
</body>

</html>